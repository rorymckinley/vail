#!/usr/bin/env ruby
# coding: utf-8
require 'rubygems'
require 'trollop'
require '../lib/vail'

trap("INT") do
  puts "\nExiting......."
  exit
end

opts = Trollop::options do
  opt :export, "Output current default settings"
  opt :import, "Run with settings in provided YAML file", :type => String
end

if opts[:export]
  puts YAML::dump(Vail::Generator.new.settings)
else
  settings = {}

  settings = opts[:import] ? YAML::load(IO.read(opts[:import])) : {}

  while true
    puts "Please enter the text for conversion:"
    text = gets.strip
    Vail::Generator.new(settings).to_morse(text)
  end
end
